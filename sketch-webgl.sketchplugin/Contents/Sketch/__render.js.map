{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./node_modules/@skpm/promise/index.js","webpack://exports/./node_modules/mocha-js-delegate/index.js","webpack://exports/./node_modules/sketch-module-web-view/lib/browser-api.js","webpack://exports/./node_modules/sketch-module-web-view/lib/constants.js","webpack://exports/./node_modules/sketch-module-web-view/lib/dispatch-first-click.js","webpack://exports/./node_modules/sketch-module-web-view/lib/execute-javascript.js","webpack://exports/./node_modules/sketch-module-web-view/lib/fitSubview.js","webpack://exports/./node_modules/sketch-module-web-view/lib/index.js","webpack://exports/./node_modules/sketch-module-web-view/lib/inject-client-messaging.js","webpack://exports/./node_modules/sketch-module-web-view/lib/movable-area.js","webpack://exports/./node_modules/sketch-module-web-view/lib/parseWebArguments.js","webpack://exports/./node_modules/sketch-module-web-view/lib/set-delegates.js","webpack://exports/./node_modules/sketch-module-web-view/lib/webview-api.js","webpack://exports/./node_modules/sketch-module-web-view/remote.js","webpack://exports/./resources/store/artboard.js","webpack://exports/./resources/store/assets.js","webpack://exports/./resources/store/groupAssets.js","webpack://exports/./resources/store/imageAssets.js","webpack://exports/./resources/store/index.js","webpack://exports/./resources/store/shapeAssets.js","webpack://exports/./resources/ui/index.html","webpack://exports/./resources/ui/loading.html","webpack://exports/./src/render.js","webpack://exports/external \"events\"","webpack://exports/external \"sketch/dom\"","webpack://exports/external \"sketch/ui\""],"names":["processMask","layer","sketch","Promise","resolve","reject","sketchObject","hasClippingMask","maskIndex","index","maskParent","parent","setHasClippingMask","maskGroup","Group","name","frame","layers","duplicate","splice","forEach","maskedLayer","x","y","push","isPathClockwise","points","end","length","sum","point","i","n","flattenShapePath","isClockwise","reversePath","transform","rotation","flippedHorizontally","flippedVertically","svgPath","getSVGPath","flatPath","ShapePath","fromSVGPath","remove","processShapePathBorderOptions","style","borderOptions","dashPattern","startArrowhead","endArrowhead","layersByConvertingToOutlines","outlines","simplify","processShapePath","type","then","layerS1","layerS2","processShapeBase","canFlatten","flatten","ungroup","ungrouped","processShape","processRelevant","processHidden","isHidden","hidden","processSymbol","detach","recursively","processText","text","trim","layerIndex","processLayer","page","layerS3","layerS4","layerS5","layerS6","layerS7","processLayers","promises","all","getArtboard","artboard","clearLayerStyles","textColor","setTextBehaviour","opacity","borders","fills","shadows","innerShadows","blur","blurType","radius","motionAngle","center","enabled","generateImageAsset","id","prefix","scale","buffer","formats","scales","output","bufferImg","Image","image","base64","nsdata","base64EncodedStringWithOptions","base64String","src","createGradientBorderImage","border","gradientOpacity","padding","position","thickness","gradientImage","Object","assign","width","height","fillType","gradient","imageAsset","createGradientFillImage","createPatternFillImage","pattern","fillOpacity","patternImage","color","processLayerBorderGradient","borderIndex","contextSettings","gradientBorderImage","processLayerFillGradient","fill","fillIndex","gradientFillImage","processLayerFillPattern","patternFillImage","processLayerFill","layerImage","processLayerFills","processLayerBorder","processLayerBorders","layerImages","processImageLayerAssets","imageLayerImages","processShapeLayerAssets","shapeLayerImages","processGroupLayerAssets","groupLayerImages","getAssets","images","reduce","imageArray","layerImageArray","processLayerImage","baseImage","fillImages","newImages","filter","fillImage","borderImages","borderImage","getStore","srmPage","Page","srmArtboard","background","includedInExport","console","log","selected","appWindowIdentifier","loadingWindowIdentifier","context","existingAppWindow","getWebview","existingLoadingWindow","close","document","getSelectedDocument","selectedPage","selectedLayers","selectedArtboard","find","store","theme","ui","getTheme","loadingWindow","BrowserWindow","identifier","modal","show","appWindow","fullscreenable","loadingWebContents","webContents","appWebContents","loadURL","require","on","executeJavaScript","appStore","maximize","JSON","stringify","alert","onShutdown"],"mappings":";;;;;;;;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,kBAAkB;AAC/B;AACA,aAAa,kBAAkB;AAC/B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,+CAA+C,SAAS;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC,SAAS;AAC9C;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC9QA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,wDAAwD,EAAE;AACxE;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,uCAAuC;AACvC;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAoC,+BAA+B;AACnE;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO,+BAA+B;AACtC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oCAAoC,aAAa;AACjD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACRA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,yCAAyC;AACzC,uDAAuD;AACvD,6DAA6D;AAC7D,+BAA+B;AAC/B,MAAM;AACN;AACA;AACA;AACA,QAAQ;AACR,gBAAgB;AAChB,MAAM,eAAe;AACrB,0CAA0C,cAAc;AACxD,MAAM;AACN;AACA;;;;;;;;;;;;ACzBA,+DAAgB,mBAAO,CAAC,2EAAa;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,YAAY;AACZ,gCAAgC;AAChC,wFAAwF;AACxF,qCAAqC;AACrC;AACA;AACA,mBAAmB;AACnB,YAAY;AACZ,kCAAkC;AAClC;AACA;AACA,kBAAkB;AAClB,YAAY;AACZ,UAAU,OAAO;AACjB;AACA;AACA,kBAAkB;AAClB,UAAU;AACV,QAAQ,cAAc;AACtB;AACA;AACA,kBAAkB;AAClB,QAAQ;AACR,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrBA;AACA;AACA,mBAAmB,mBAAO,CAAC,sBAAQ;AACnC,sBAAsB,mBAAO,CAAC,+EAAe;AAC7C,kBAAkB,mBAAO,CAAC,+EAAe;AACzC,uBAAuB,mBAAO,CAAC,6EAAc;AAC7C,yBAAyB,mBAAO,CAAC,iGAAwB;AACzD,4BAA4B,mBAAO,CAAC,uGAA2B;AAC/D,kBAAkB,mBAAO,CAAC,iFAAgB;AAC1C,wBAAwB,mBAAO,CAAC,6FAAsB;AACtD,mBAAmB,mBAAO,CAAC,mFAAiB;;AAE5C;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;ACxWA,gBAAgB,mBAAO,CAAC,2EAAa;;AAErC;AACA;AACA,qDAAqD;AACrD,gDAAgD;AAChD,yBAAyB;AACzB;AACA,QAAQ;AACR,uDAAuD;AACvD,6CAA6C;AAC7C,0BAA0B;AAC1B,sDAAsD;AACtD;AACA;AACA,uBAAuB;AACvB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,wCAAwC;AACxC,QAAQ,EAAE;AACV,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjCA,gBAAgB,mBAAO,CAAC,2EAAa;;AAErC;AACA;AACA,mBAAmB;AACnB,yDAAyD;AACzD;AACA,kCAAkC;AAClC,2CAA2C,4BAA4B,eAAe;AACtF,gCAAgC,yBAAyB,cAAc;AACvE;AACA,OAAO;AACP;AACA,8BAA8B;AAC9B,qDAAqD,SAAS;AAC9D;AACA;AACA,QAAQ;AACR,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;;;;;;;;;;;AC/DA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;AClBA,+DAAgB,mBAAO,CAAC,oEAAmB;AAC3C,wBAAwB,mBAAO,CAAC,2FAAqB;AACrD,gBAAgB,mBAAO,CAAC,2EAAa;;AAErC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,2CAA2C;AAC3C,OAAO;;AAEP;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA,+DAA+D;AAC/D;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;AACL,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,sBAAsB;;AAE7C;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,OAAO;AACP;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;;;;;;;;;;;;AChZA,mBAAmB,mBAAO,CAAC,sBAAQ;AACnC,wBAAwB,mBAAO,CAAC,6FAAsB;;AAEtD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA,QAAQ,kCAAkC;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;ACrOA;AACA;;AAEA;AACA,SAAS,mBAAO,CAAC,iEAAO;AACxB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;AClCA;AAAA,mDAAMA,WAAW,GAAG,SAAdA,WAAc,OAAuB;AAAA,MAApBC,KAAoB,QAApBA,KAAoB;AAAA,MAAbC,MAAa,QAAbA,MAAa;AACvC,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,QAAIJ,KAAK,IAAIA,KAAK,CAACK,YAAN,CAAmBC,eAAnB,EAAb,EAAmD;AAC/C,UAAMC,SAAS,GAAGP,KAAK,CAACQ,KAAxB;AACA,UAAMC,UAAU,GAAGT,KAAK,CAACU,MAAzB;AACAV,WAAK,CAACK,YAAN,CAAmBM,kBAAnB,CAAsC,KAAtC,EAH+C,CAI/C;;AACA,UAAMC,SAAS,GAAG,IAAIX,MAAM,CAACY,KAAX,CAA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","file":"__render.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/render.js\");\n","/* from https://github.com/taylorhakes/promise-polyfill */\n\nfunction promiseFinally(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nfunction noop() {}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError(\"Promises must be constructed via new\");\n  if (typeof fn !== \"function\") throw new TypeError(\"not a function\");\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError(\"A promise cannot be resolved with itself.\");\n    if (\n      newValue &&\n      (typeof newValue === \"object\" || typeof newValue === \"function\")\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === \"function\") {\n        doResolve(then.bind(newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value, self);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === \"function\" ? onFulfilled : null;\n  this.onRejected = typeof onRejected === \"function\" ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) {\n          Promise._multipleResolvesFn(\"resolve\", self, value);\n          return;\n        }\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) {\n          Promise._multipleResolvesFn(\"reject\", self, reason);\n          return;\n        }\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) {\n      Promise._multipleResolvesFn(\"reject\", self, ex);\n      return;\n    }\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype[\"catch\"] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype[\"finally\"] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!Array.isArray(arr)) {\n      return reject(new TypeError(\"Promise.all accepts an array\"));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === \"object\" || typeof val === \"function\")) {\n          var then = val.then;\n          if (typeof then === \"function\") {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === \"object\" && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!Array.isArray(arr)) {\n      return reject(new TypeError(\"Promise.race accepts an array\"));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      Promise.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn = setImmediate;\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err, promise) {\n  if (\n    typeof process !== \"undefined\" &&\n    process.listenerCount &&\n    (process.listenerCount(\"unhandledRejection\") ||\n      process.listenerCount(\"uncaughtException\"))\n  ) {\n    process.emit(\"unhandledRejection\", err, promise);\n    process.emit(\"uncaughtException\", err, \"unhandledRejection\");\n  } else if (typeof console !== \"undefined\" && console) {\n    console.warn(\"Possible Unhandled Promise Rejection:\", err);\n  }\n};\n\nPromise._multipleResolvesFn = function _multipleResolvesFn(\n  type,\n  promise,\n  value\n) {\n  if (typeof process !== \"undefined\" && process.emit) {\n    process.emit(\"multipleResolves\", type, promise, value);\n  }\n};\n\nmodule.exports = Promise;\n","/* globals MOClassDescription, NSObject, NSSelectorFromString, NSClassFromString, MOPropertyDescription */\n\nmodule.exports = function MochaDelegate(definition, superclass) {\n  var uniqueClassName =\n    'MochaJSDelegate_DynamicClass_' + NSUUID.UUID().UUIDString()\n\n  var delegateClassDesc = MOClassDescription.allocateDescriptionForClassWithName_superclass_(\n    uniqueClassName,\n    superclass || NSObject\n  )\n\n  // Storage\n  var handlers = {}\n  var ivars = {}\n\n  // Define an instance method\n  function setHandlerForSelector(selectorString, func) {\n    var handlerHasBeenSet = selectorString in handlers\n    var selector = NSSelectorFromString(selectorString)\n\n    handlers[selectorString] = func\n\n    /*\n      For some reason, Mocha acts weird about arguments: https://github.com/logancollins/Mocha/issues/28\n      We have to basically create a dynamic handler with a likewise dynamic number of predefined arguments.\n    */\n    if (!handlerHasBeenSet) {\n      var args = []\n      var regex = /:/g\n      while (regex.exec(selectorString)) {\n        args.push('arg' + args.length)\n      }\n\n      // eslint-disable-next-line no-eval\n      var dynamicFunction = eval(\n        '(function (' +\n          args.join(', ') +\n          ') { return handlers[selectorString].apply(this, arguments); })'\n      )\n\n      delegateClassDesc.addInstanceMethodWithSelector_function(\n        selector,\n        dynamicFunction\n      )\n    }\n  }\n\n  // define a property\n  function setIvar(key, value) {\n    var ivarHasBeenSet = key in handlers\n\n    ivars[key] = value\n\n    if (!ivarHasBeenSet) {\n      delegateClassDesc.addInstanceVariableWithName_typeEncoding(key, '@')\n      var description = MOPropertyDescription.new()\n      description.name = key\n      description.typeEncoding = '@'\n      description.weak = true\n      description.ivarName = key\n      delegateClassDesc.addProperty(description)\n    }\n  }\n\n  this.getClass = function() {\n    return NSClassFromString(uniqueClassName)\n  }\n\n  this.getClassInstance = function(instanceVariables) {\n    var instance = NSClassFromString(uniqueClassName).new()\n    Object.keys(ivars).forEach(function(key) {\n      instance[key] = ivars[key]\n    })\n    Object.keys(instanceVariables || {}).forEach(function(key) {\n      instance[key] = instanceVariables[key]\n    })\n    return instance\n  }\n  // alias\n  this.new = this.getClassInstance\n\n  // Convenience\n  if (typeof definition === 'object') {\n    Object.keys(definition).forEach(\n      function(key) {\n        if (typeof definition[key] === 'function') {\n          setHandlerForSelector(key, definition[key])\n        } else {\n          setIvar(key, definition[key])\n        }\n      }\n    )\n  }\n\n  delegateClassDesc.registerClass()\n}\n","function parseHexColor(color) {\n  // Check the string for incorrect formatting.\n  if (!color || color[0] !== '#') {\n    if (\n      color &&\n      typeof color.isKindOfClass === 'function' &&\n      color.isKindOfClass(NSColor)\n    ) {\n      return color\n    }\n    throw new Error(\n      'Incorrect color formating. It should be an hex color: #RRGGBBAA'\n    )\n  }\n\n  // append FF if alpha channel is not specified.\n  var source = color.substr(1)\n  if (source.length === 3) {\n    source += 'F'\n  } else if (source.length === 6) {\n    source += 'FF'\n  }\n  // Convert the string from #FFF format to #FFFFFF format.\n  var hex\n  if (source.length === 4) {\n    for (var i = 0; i < 4; i += 1) {\n      hex += source[i]\n      hex += source[i]\n    }\n  } else if (source.length === 8) {\n    hex = source\n  } else {\n    return NSColor.whiteColor()\n  }\n\n  var r = parseInt(hex.slice(0, 2), 16)\n  var g = parseInt(hex.slice(2, 4), 16)\n  var b = parseInt(hex.slice(4, 6), 16)\n  var a = parseInt(hex.slice(6, 8), 16)\n\n  return NSColor.colorWithSRGBRed_green_blue_alpha(r, g, b, a)\n}\n\nmodule.exports = function(browserWindow, panel, webview) {\n  // keep reference to the subviews\n  browserWindow._panel = panel\n  browserWindow._webview = webview\n  browserWindow._destroyed = false\n\n  browserWindow.destroy = function() {\n    return panel.close()\n  }\n\n  browserWindow.close = function() {\n    if (panel.delegate().utils && panel.delegate().utils.parentWindow) {\n      var shouldClose = true\n      browserWindow.emit('close', {\n        get defaultPrevented() {\n          return !shouldClose\n        },\n        preventDefault: function() {\n          shouldClose = false\n        },\n      })\n      if (shouldClose) {\n        panel.delegate().utils.parentWindow.endSheet(panel)\n      }\n      return\n    }\n\n    if (!browserWindow.isClosable()) {\n      return\n    }\n\n    panel.performClose(null)\n  }\n\n  function focus(focused) {\n    if (!browserWindow.isVisible()) {\n      return\n    }\n    if (focused) {\n      NSApplication.sharedApplication().activateIgnoringOtherApps(true)\n      panel.makeKeyAndOrderFront(null)\n    } else {\n      panel.orderBack(null)\n      NSApp.mainWindow().makeKeyAndOrderFront(null)\n    }\n  }\n\n  browserWindow.focus = focus.bind(this, true)\n  browserWindow.blur = focus.bind(this, false)\n\n  browserWindow.isFocused = function() {\n    return panel.isKeyWindow()\n  }\n\n  browserWindow.isDestroyed = function() {\n    return browserWindow._destroyed\n  }\n\n  browserWindow.show = function() {\n    // This method is supposed to put focus on window, however if the app does not\n    // have focus then \"makeKeyAndOrderFront\" will only show the window.\n    NSApp.activateIgnoringOtherApps(true)\n\n    if (panel.delegate().utils && panel.delegate().utils.parentWindow) {\n      return panel.delegate().utils.parentWindow.beginSheet_completionHandler(\n        panel,\n        __mocha__.createBlock_function('v16@?0q8', function() {\n          browserWindow.emit('closed')\n        })\n      )\n    }\n\n    return panel.makeKeyAndOrderFront(null)\n  }\n\n  browserWindow.showInactive = function() {\n    return panel.orderFrontRegardless()\n  }\n\n  browserWindow.hide = function() {\n    return panel.orderOut(null)\n  }\n\n  browserWindow.isVisible = function() {\n    return panel.isVisible()\n  }\n\n  browserWindow.isModal = function() {\n    return false\n  }\n\n  browserWindow.maximize = function() {\n    if (!browserWindow.isMaximized()) {\n      panel.zoom(null)\n    }\n  }\n  browserWindow.unmaximize = function() {\n    if (browserWindow.isMaximized()) {\n      panel.zoom(null)\n    }\n  }\n\n  browserWindow.isMaximized = function() {\n    if ((panel.styleMask() & NSResizableWindowMask) !== 0) {\n      return panel.isZoomed()\n    }\n    var rectScreen = NSScreen.mainScreen().visibleFrame()\n    var rectWindow = panel.frame()\n    return (\n      rectScreen.origin.x == rectWindow.origin.x &&\n      rectScreen.origin.y == rectWindow.origin.y &&\n      rectScreen.size.width == rectWindow.size.width &&\n      rectScreen.size.height == rectWindow.size.height\n    )\n  }\n\n  browserWindow.minimize = function() {\n    return panel.miniaturize(null)\n  }\n\n  browserWindow.restore = function() {\n    return panel.deminiaturize(null)\n  }\n\n  browserWindow.isMinimized = function() {\n    return panel.isMiniaturized()\n  }\n\n  browserWindow.setFullScreen = function(fullscreen) {\n    if (fullscreen !== browserWindow.isFullscreen()) {\n      panel.toggleFullScreen(null)\n    }\n  }\n\n  browserWindow.isFullscreen = function() {\n    return panel.styleMask() & NSFullScreenWindowMask\n  }\n\n  browserWindow.setAspectRatio = function(aspectRatio /* , extraSize */) {\n    // Reset the behaviour to default if aspect_ratio is set to 0 or less.\n    if (aspectRatio > 0.0) {\n      panel.setAspectRatio(NSMakeSize(aspectRatio, 1.0))\n    } else {\n      panel.setResizeIncrements(NSMakeSize(1.0, 1.0))\n    }\n  }\n\n  browserWindow.setBounds = function(bounds, animate) {\n    if (!bounds) {\n      return\n    }\n\n    // Do nothing if in fullscreen mode.\n    if (browserWindow.isFullscreen()) {\n      return\n    }\n\n    const newBounds = Object.assign(browserWindow.getBounds(), bounds)\n\n    // TODO: Check size constraints since setFrame does not check it.\n    // var size = bounds.size\n    // size.SetToMax(GetMinimumSize());\n    // gfx::Size max_size = GetMaximumSize();\n    // if (!max_size.IsEmpty())\n    //   size.SetToMin(max_size);\n\n    var cocoaBounds = NSMakeRect(\n      newBounds.x,\n      0,\n      newBounds.width,\n      newBounds.height\n    )\n    // Flip Y coordinates based on the primary screen\n    var screen = NSScreen.screens().firstObject()\n    cocoaBounds.origin.y = NSHeight(screen.frame()) - newBounds.y\n\n    panel.setFrame_display_animate(cocoaBounds, true, animate)\n  }\n\n  browserWindow.getBounds = function() {\n    const cocoaBounds = panel.frame()\n    var mainScreenRect = NSScreen.screens()\n      .firstObject()\n      .frame()\n    return {\n      x: cocoaBounds.origin.x,\n      y: Math.round(NSHeight(mainScreenRect) - cocoaBounds.origin.y),\n      width: cocoaBounds.size.width,\n      height: cocoaBounds.size.height,\n    }\n  }\n\n  browserWindow.setContentBounds = function(bounds, animate) {\n    // TODO:\n    browserWindow.setBounds(bounds, animate)\n  }\n\n  browserWindow.getContentBounds = function() {\n    // TODO:\n    return browserWindow.getBounds()\n  }\n\n  browserWindow.setSize = function(width, height, animate) {\n    // TODO: handle resizing around center\n    return browserWindow.setBounds({ width: width, height: height }, animate)\n  }\n\n  browserWindow.getSize = function() {\n    var bounds = browserWindow.getBounds()\n    return [bounds.width, bounds.height]\n  }\n\n  browserWindow.setContentSize = function(width, height, animate) {\n    // TODO: handle resizing around center\n    return browserWindow.setContentBounds(\n      { width: width, height: height },\n      animate\n    )\n  }\n\n  browserWindow.getContentSize = function() {\n    var bounds = browserWindow.getContentBounds()\n    return [bounds.width, bounds.height]\n  }\n\n  browserWindow.setMinimumSize = function(width, height) {\n    const minSize = CGSizeMake(width, height)\n    panel.setContentMinSize(minSize)\n  }\n\n  browserWindow.getMinimumSize = function() {\n    const size = panel.contentMinSize()\n    return [size.width, size.height]\n  }\n\n  browserWindow.setMaximumSize = function(width, height) {\n    const maxSize = CGSizeMake(width, height)\n    panel.setContentMaxSize(maxSize)\n  }\n\n  browserWindow.getMaximumSize = function() {\n    const size = panel.contentMaxSize()\n    return [size.width, size.height]\n  }\n\n  browserWindow.setResizable = function(resizable) {\n    return browserWindow._setStyleMask(resizable, NSResizableWindowMask)\n  }\n\n  browserWindow.isResizable = function() {\n    return panel.styleMask() & NSResizableWindowMask\n  }\n\n  browserWindow.setMovable = function(movable) {\n    return panel.setMovable(movable)\n  }\n  browserWindow.isMovable = function() {\n    return panel.isMovable()\n  }\n\n  browserWindow.setMinimizable = function(minimizable) {\n    return browserWindow._setStyleMask(minimizable, NSMiniaturizableWindowMask)\n  }\n\n  browserWindow.isMinimizable = function() {\n    return panel.styleMask() & NSMiniaturizableWindowMask\n  }\n\n  browserWindow.setMaximizable = function(maximizable) {\n    if (panel.standardWindowButton(NSWindowZoomButton)) {\n      panel.standardWindowButton(NSWindowZoomButton).setEnabled(maximizable)\n    }\n  }\n\n  browserWindow.isMaximizable = function() {\n    return (\n      panel.standardWindowButton(NSWindowZoomButton) &&\n      panel.standardWindowButton(NSWindowZoomButton).isEnabled()\n    )\n  }\n\n  browserWindow.setFullScreenable = function(fullscreenable) {\n    browserWindow._setCollectionBehavior(\n      fullscreenable,\n      NSWindowCollectionBehaviorFullScreenPrimary\n    )\n    // On EL Capitan this flag is required to hide fullscreen button.\n    browserWindow._setCollectionBehavior(\n      !fullscreenable,\n      NSWindowCollectionBehaviorFullScreenAuxiliary\n    )\n  }\n\n  browserWindow.isFullScreenable = function() {\n    var collectionBehavior = panel.collectionBehavior()\n    return collectionBehavior & NSWindowCollectionBehaviorFullScreenPrimary\n  }\n\n  browserWindow.setClosable = function(closable) {\n    browserWindow._setStyleMask(closable, NSClosableWindowMask)\n  }\n\n  browserWindow.isClosable = function() {\n    return panel.styleMask() & NSClosableWindowMask\n  }\n\n  browserWindow.setAlwaysOnTop = function(top, level, relativeLevel) {\n    var windowLevel = NSNormalWindowLevel\n    var maxWindowLevel = CGWindowLevelForKey(kCGMaximumWindowLevelKey)\n    var minWindowLevel = CGWindowLevelForKey(kCGMinimumWindowLevelKey)\n\n    if (top) {\n      if (level === 'normal') {\n        windowLevel = NSNormalWindowLevel\n      } else if (level === 'torn-off-menu') {\n        windowLevel = NSTornOffMenuWindowLevel\n      } else if (level === 'modal-panel') {\n        windowLevel = NSModalPanelWindowLevel\n      } else if (level === 'main-menu') {\n        windowLevel = NSMainMenuWindowLevel\n      } else if (level === 'status') {\n        windowLevel = NSStatusWindowLevel\n      } else if (level === 'pop-up-menu') {\n        windowLevel = NSPopUpMenuWindowLevel\n      } else if (level === 'screen-saver') {\n        windowLevel = NSScreenSaverWindowLevel\n      } else if (level === 'dock') {\n        // Deprecated by macOS, but kept for backwards compatibility\n        windowLevel = NSDockWindowLevel\n      } else {\n        windowLevel = NSFloatingWindowLevel\n      }\n    }\n\n    var newLevel = windowLevel + (relativeLevel || 0)\n    if (newLevel >= minWindowLevel && newLevel <= maxWindowLevel) {\n      panel.setLevel(newLevel)\n    } else {\n      throw new Error(\n        'relativeLevel must be between ' +\n          minWindowLevel +\n          ' and ' +\n          maxWindowLevel\n      )\n    }\n  }\n\n  browserWindow.isAlwaysOnTop = function() {\n    return panel.level() !== NSNormalWindowLevel\n  }\n\n  browserWindow.moveTop = function() {\n    return panel.orderFrontRegardless()\n  }\n\n  browserWindow.center = function() {\n    panel.center()\n  }\n\n  browserWindow.setPosition = function(x, y, animate) {\n    return browserWindow.setBounds({ x: x, y: y }, animate)\n  }\n\n  browserWindow.getPosition = function() {\n    var bounds = browserWindow.getBounds()\n    return [bounds.x, bounds.y]\n  }\n\n  browserWindow.setTitle = function(title) {\n    panel.setTitle(title)\n  }\n\n  browserWindow.getTitle = function() {\n    return String(panel.title())\n  }\n\n  var attentionRequestId = 0\n  browserWindow.flashFrame = function(flash) {\n    if (flash) {\n      attentionRequestId = NSApp.requestUserAttention(NSInformationalRequest)\n    } else {\n      NSApp.cancelUserAttentionRequest(attentionRequestId)\n      attentionRequestId = 0\n    }\n  }\n\n  browserWindow.getNativeWindowHandle = function() {\n    return panel\n  }\n\n  browserWindow.getNativeWebViewHandle = function() {\n    return webview\n  }\n\n  browserWindow.loadURL = function(url) {\n    // When frameLocation is a file, prefix it with the Sketch Resources path\n    if (/^(?!https?|file).*\\.html?$/.test(url)) {\n      if (typeof __command !== 'undefined' && __command.pluginBundle()) {\n        url =\n          'file://' +\n          __command\n            .pluginBundle()\n            .urlForResourceNamed(url)\n            .path()\n      }\n    }\n\n    if (/^file:\\/\\/.*\\.html?$/.test(url)) {\n      // ensure URLs containing spaces are properly handled\n      url = NSString.alloc().initWithString(url)\n      url = url.stringByAddingPercentEncodingWithAllowedCharacters(\n        NSCharacterSet.URLQueryAllowedCharacterSet()\n      )\n      webview.loadFileURL_allowingReadAccessToURL(\n        NSURL.URLWithString(url),\n        NSURL.URLWithString('file:///')\n      )\n      return\n    }\n\n    const properURL = NSURL.URLWithString(url)\n    const urlRequest = NSURLRequest.requestWithURL(properURL)\n\n    webview.loadRequest(urlRequest)\n  }\n\n  browserWindow.reload = function() {\n    webview.reload()\n  }\n\n  browserWindow.setHasShadow = function(hasShadow) {\n    return panel.setHasShadow(hasShadow)\n  }\n\n  browserWindow.hasShadow = function() {\n    return panel.hasShadow()\n  }\n\n  browserWindow.setOpacity = function(opacity) {\n    return panel.setAlphaValue(opacity)\n  }\n\n  browserWindow.getOpacity = function() {\n    return panel.alphaValue()\n  }\n\n  browserWindow.setVisibleOnAllWorkspaces = function(visible) {\n    return browserWindow._setCollectionBehavior(\n      visible,\n      NSWindowCollectionBehaviorCanJoinAllSpaces\n    )\n  }\n\n  browserWindow.isVisibleOnAllWorkspaces = function() {\n    var collectionBehavior = panel.collectionBehavior()\n    return collectionBehavior & NSWindowCollectionBehaviorCanJoinAllSpaces\n  }\n\n  browserWindow.setIgnoreMouseEvents = function(ignore) {\n    return panel.setIgnoresMouseEvents(ignore)\n  }\n\n  browserWindow.setContentProtection = function(enable) {\n    panel.setSharingType(enable ? NSWindowSharingNone : NSWindowSharingReadOnly)\n  }\n\n  browserWindow.setAutoHideCursor = function(autoHide) {\n    panel.setDisableAutoHideCursor(autoHide)\n  }\n\n  browserWindow.setVibrancy = function(type) {\n    var effectView = browserWindow._vibrantView\n\n    if (!type) {\n      if (effectView == null) {\n        return\n      }\n\n      effectView.removeFromSuperview()\n      panel.setVibrantView(null)\n      return\n    }\n\n    if (effectView == null) {\n      var contentView = panel.contentView()\n      effectView = NSVisualEffectView.alloc().initWithFrame(\n        contentView.bounds()\n      )\n      browserWindow._vibrantView = effectView\n\n      effectView.setAutoresizingMask(NSViewWidthSizable | NSViewHeightSizable)\n      effectView.setBlendingMode(NSVisualEffectBlendingModeBehindWindow)\n      effectView.setState(NSVisualEffectStateActive)\n      effectView.setFrame(contentView.bounds())\n      contentView.addSubview_positioned_relativeTo(\n        effectView,\n        NSWindowBelow,\n        null\n      )\n    }\n\n    var vibrancyType = NSVisualEffectMaterialLight\n\n    if (type === 'appearance-based') {\n      vibrancyType = NSVisualEffectMaterialAppearanceBased\n    } else if (type === 'light') {\n      vibrancyType = NSVisualEffectMaterialLight\n    } else if (type === 'dark') {\n      vibrancyType = NSVisualEffectMaterialDark\n    } else if (type === 'titlebar') {\n      vibrancyType = NSVisualEffectMaterialTitlebar\n    } else if (type === 'selection') {\n      vibrancyType = NSVisualEffectMaterialSelection\n    } else if (type === 'menu') {\n      vibrancyType = NSVisualEffectMaterialMenu\n    } else if (type === 'popover') {\n      vibrancyType = NSVisualEffectMaterialPopover\n    } else if (type === 'sidebar') {\n      vibrancyType = NSVisualEffectMaterialSidebar\n    } else if (type === 'medium-light') {\n      vibrancyType = NSVisualEffectMaterialMediumLight\n    } else if (type === 'ultra-dark') {\n      vibrancyType = NSVisualEffectMaterialUltraDark\n    }\n\n    effectView.setMaterial(vibrancyType)\n  }\n\n  browserWindow._setBackgroundColor = function(colorName) {\n    var color = parseHexColor(colorName)\n    webview.setValue_forKey(false, 'drawsBackground')\n    panel.backgroundColor = color\n  }\n\n  browserWindow._invalidate = function() {\n    panel.flushWindow()\n    panel.contentView().setNeedsDisplay(true)\n  }\n\n  browserWindow._setStyleMask = function(on, flag) {\n    var wasMaximizable = browserWindow.isMaximizable()\n    if (on) {\n      panel.setStyleMask(panel.styleMask() | flag)\n    } else {\n      panel.setStyleMask(panel.styleMask() & ~flag)\n    }\n    // Change style mask will make the zoom button revert to default, probably\n    // a bug of Cocoa or macOS.\n    browserWindow.setMaximizable(wasMaximizable)\n  }\n\n  browserWindow._setCollectionBehavior = function(on, flag) {\n    var wasMaximizable = browserWindow.isMaximizable()\n    if (on) {\n      panel.setCollectionBehavior(panel.collectionBehavior() | flag)\n    } else {\n      panel.setCollectionBehavior(panel.collectionBehavior() & ~flag)\n    }\n    // Change collectionBehavior will make the zoom button revert to default,\n    // probably a bug of Cocoa or macOS.\n    browserWindow.setMaximizable(wasMaximizable)\n  }\n\n  browserWindow._showWindowButton = function(button) {\n    var view = panel.standardWindowButton(button)\n    view.superview().addSubview_positioned_relative(view, NSWindowAbove, null)\n  }\n}\n","module.exports = {\n  JS_BRIDGE: '__skpm_sketchBridge',\n  JS_BRIDGE_RESULT_SUCCESS: '__skpm_sketchBridge_success',\n  JS_BRIDGE_RESULT_ERROR: '__skpm_sketchBridge_error',\n  START_MOVING_WINDOW: '__skpm_startMovingWindow',\n  EXECUTE_JAVASCRIPT: '__skpm_executeJS',\n  EXECUTE_JAVASCRIPT_SUCCESS: '__skpm_executeJS_success_',\n  EXECUTE_JAVASCRIPT_ERROR: '__skpm_executeJS_error_',\n}\n","var tagsToFocus =\n  '[\"text\", \"textarea\", \"date\", \"datetime-local\", \"email\", \"number\", \"month\", \"password\", \"search\", \"tel\", \"time\", \"url\", \"week\" ]'\n\nmodule.exports = function(webView, event) {\n  var point = webView.convertPoint_fromView(event.locationInWindow(), null)\n  return (\n    'var el = document.elementFromPoint(' + // get the DOM element that match the event\n    point.x +\n    ', ' +\n    point.y +\n    '); ' +\n    'if (el && el.tagName === \"SELECT\") {' + // select needs special handling\n    '  var event = document.createEvent(\"MouseEvents\");' +\n    '  event.initMouseEvent(\"mousedown\", true, true, window);' +\n    '  el.dispatchEvent(event);' +\n    '} else if (el && ' + // some tags need to be focused instead of clicked\n    tagsToFocus +\n    '.indexOf(el.type) >= 0 && ' +\n    'el.focus' +\n    ') {' +\n    'el.focus();' + // so focus them\n    '} else if (el) {' +\n    'el.dispatchEvent(new Event(\"click\", {bubbles: true}))' + // click the others\n    '}'\n  )\n}\n","var CONSTANTS = require('./constants')\n\nmodule.exports = function(webview, browserWindow) {\n  function executeJavaScript(script, userGesture, callback) {\n    if (typeof userGesture === 'function') {\n      callback = userGesture\n      userGesture = false\n    }\n    var fiber = coscript.createFiber()\n\n    // if the webview is not ready yet, defer the execution until it is\n    if (\n      webview.navigationDelegate().state &&\n      webview.navigationDelegate().state.wasReady == 0\n    ) {\n      return new Promise(function(resolve, reject) {\n        browserWindow.once('ready-to-show', function() {\n          executeJavaScript(script, userGesture, callback)\n            .then(resolve)\n            .catch(reject)\n          fiber.cleanup()\n        })\n      })\n    }\n\n    return new Promise(function(resolve, reject) {\n      var requestId = Math.random()\n\n      browserWindow.webContents.on(\n        CONSTANTS.EXECUTE_JAVASCRIPT_SUCCESS + requestId,\n        function(res) {\n          try {\n            if (callback) {\n              callback(null, res)\n            }\n            resolve(res)\n          } catch (err) {\n            reject(err)\n          }\n          fiber.cleanup()\n        }\n      )\n      browserWindow.webContents.on(\n        CONSTANTS.EXECUTE_JAVASCRIPT_ERROR + requestId,\n        function(err) {\n          try {\n            if (callback) {\n              callback(err)\n              resolve()\n            } else {\n              reject(err)\n            }\n          } catch (err2) {\n            reject(err2)\n          }\n          fiber.cleanup()\n        }\n      )\n\n      webview.evaluateJavaScript_completionHandler(\n        module.exports.wrapScript(script, requestId),\n        null\n      )\n    })\n  }\n\n  return executeJavaScript\n}\n\nmodule.exports.wrapScript = function(script, requestId) {\n  return (\n    'window.' +\n    CONSTANTS.EXECUTE_JAVASCRIPT +\n    '(' +\n    requestId +\n    ', ' +\n    JSON.stringify(script) +\n    ')'\n  )\n}\n\nmodule.exports.injectScript = function(webView) {\n  var source =\n    'window.' +\n    CONSTANTS.EXECUTE_JAVASCRIPT +\n    ' = function(id, script) {' +\n    '  try {' +\n    '    var res = eval(script);' +\n    '    if (res && typeof res.then === \"function\" && typeof res.catch === \"function\") {' +\n    '      res.then(function (res2) {' +\n    '        window.postMessage(\"' +\n    CONSTANTS.EXECUTE_JAVASCRIPT_SUCCESS +\n    '\" + id, res2);' +\n    '      })' +\n    '      .catch(function (err) {' +\n    '        window.postMessage(\"' +\n    CONSTANTS.EXECUTE_JAVASCRIPT_ERROR +\n    '\" + id, err);' +\n    '      })' +\n    '    } else {' +\n    '      window.postMessage(\"' +\n    CONSTANTS.EXECUTE_JAVASCRIPT_SUCCESS +\n    '\" + id, res);' +\n    '    }' +\n    '  } catch (err) {' +\n    '    window.postMessage(\"' +\n    CONSTANTS.EXECUTE_JAVASCRIPT_ERROR +\n    '\" + id, err);' +\n    '  }' +\n    '}'\n  var script = WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(\n    source,\n    0,\n    true\n  )\n  webView\n    .configuration()\n    .userContentController()\n    .addUserScript(script)\n}\n","function addEdgeConstraint(edge, subview, view, constant) {\n  view.addConstraint(\n    NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(\n      subview,\n      edge,\n      NSLayoutRelationEqual,\n      view,\n      edge,\n      1,\n      constant\n    )\n  )\n}\nmodule.exports = function fitSubviewToView(subview, view, constants) {\n  constants = constants || []\n  subview.setTranslatesAutoresizingMaskIntoConstraints(false)\n\n  addEdgeConstraint(NSLayoutAttributeLeft, subview, view, constants[0] || 0)\n  addEdgeConstraint(NSLayoutAttributeTop, subview, view, constants[1] || 0)\n  addEdgeConstraint(NSLayoutAttributeRight, subview, view, constants[2] || 0)\n  addEdgeConstraint(NSLayoutAttributeBottom, subview, view, constants[3] || 0)\n}\n","/* let's try to match the API from Electron's Browser window\n(https://github.com/electron/electron/blob/master/docs/api/browser-window.md) */\nvar EventEmitter = require('events')\nvar buildBrowserAPI = require('./browser-api')\nvar buildWebAPI = require('./webview-api')\nvar fitSubviewToView = require('./fitSubview')\nvar dispatchFirstClick = require('./dispatch-first-click')\nvar injectClientMessaging = require('./inject-client-messaging')\nvar movableArea = require('./movable-area')\nvar executeJavaScript = require('./execute-javascript')\nvar setDelegates = require('./set-delegates')\n\nfunction BrowserWindow(options) {\n  options = options || {}\n\n  var identifier = options.identifier || NSUUID.UUID().UUIDString()\n  var threadDictionary = NSThread.mainThread().threadDictionary()\n\n  var existingBrowserWindow = BrowserWindow.fromId(identifier)\n\n  // if we already have a window opened, reuse it\n  if (existingBrowserWindow) {\n    return existingBrowserWindow\n  }\n\n  var browserWindow = new EventEmitter()\n  browserWindow.id = identifier\n\n  if (options.modal && !options.parent) {\n    throw new Error('A modal needs to have a parent.')\n  }\n\n  // Long-running script\n  var fiber = coscript.createFiber()\n\n  // Window size\n  var width = options.width || 800\n  var height = options.height || 600\n  var mainScreenRect = NSScreen.screens()\n    .firstObject()\n    .frame()\n  var cocoaBounds = NSMakeRect(\n    typeof options.x !== 'undefined'\n      ? options.x\n      : Math.round((NSWidth(mainScreenRect) - width) / 2),\n    typeof options.y !== 'undefined'\n      ? NSHeight(mainScreenRect) - options.y\n      : Math.round((NSHeight(mainScreenRect) - height) / 2),\n    width,\n    height\n  )\n\n  if (options.titleBarStyle && options.titleBarStyle !== 'default') {\n    options.frame = false\n  }\n\n  var useStandardWindow = options.windowType !== 'textured'\n  var styleMask = NSTitledWindowMask\n\n  // this is commented out because the toolbar doesn't appear otherwise :thinking-face:\n  // if (!useStandardWindow || options.frame === false) {\n  //   styleMask = NSFullSizeContentViewWindowMask\n  // }\n  if (options.minimizable !== false) {\n    styleMask |= NSMiniaturizableWindowMask\n  }\n  if (options.closable !== false) {\n    styleMask |= NSClosableWindowMask\n  }\n  if (options.resizable !== false) {\n    styleMask |= NSResizableWindowMask\n  }\n  if (!useStandardWindow || options.transparent || options.frame === false) {\n    styleMask |= NSTexturedBackgroundWindowMask\n  }\n\n  var panel = NSPanel.alloc().initWithContentRect_styleMask_backing_defer(\n    cocoaBounds,\n    styleMask,\n    NSBackingStoreBuffered,\n    true\n  )\n\n  var wkwebviewConfig = WKWebViewConfiguration.alloc().init()\n  var webView = WKWebView.alloc().initWithFrame_configuration(\n    CGRectMake(0, 0, options.width || 800, options.height || 600),\n    wkwebviewConfig\n  )\n  injectClientMessaging(webView)\n  webView.setAutoresizingMask(NSViewWidthSizable | NSViewHeightSizable)\n\n  buildBrowserAPI(browserWindow, panel, webView)\n  buildWebAPI(browserWindow, panel, webView)\n  setDelegates(browserWindow, panel, webView, options)\n\n  if (options.windowType === 'desktop') {\n    panel.setLevel(kCGDesktopWindowLevel - 1)\n    // panel.setCanBecomeKeyWindow(false)\n    panel.setCollectionBehavior(\n      NSWindowCollectionBehaviorCanJoinAllSpaces |\n        NSWindowCollectionBehaviorStationary |\n        NSWindowCollectionBehaviorIgnoresCycle\n    )\n  }\n\n  if (\n    typeof options.minWidth !== 'undefined' ||\n    typeof options.minHeight !== 'undefined'\n  ) {\n    browserWindow.setMinimumSize(options.minWidth || 0, options.minHeight || 0)\n  }\n\n  if (\n    typeof options.maxWidth !== 'undefined' ||\n    typeof options.maxHeight !== 'undefined'\n  ) {\n    browserWindow.setMaximumSize(\n      options.maxWidth || 10000,\n      options.maxHeight || 10000\n    )\n  }\n\n  // if (options.focusable === false) {\n  //   panel.setCanBecomeKeyWindow(false)\n  // }\n\n  if (options.transparent || options.frame === false) {\n    panel.titlebarAppearsTransparent = true\n    panel.titleVisibility = NSWindowTitleHidden\n    panel.setOpaque(0)\n    panel.isMovableByWindowBackground = true\n    var toolbar2 = NSToolbar.alloc().initWithIdentifier(\n      'titlebarStylingToolbar'\n    )\n    toolbar2.setShowsBaselineSeparator(false)\n    panel.setToolbar(toolbar2)\n  }\n\n  if (options.titleBarStyle === 'hiddenInset') {\n    var toolbar = NSToolbar.alloc().initWithIdentifier('titlebarStylingToolbar')\n    toolbar.setShowsBaselineSeparator(false)\n    panel.setToolbar(toolbar)\n  }\n\n  if (options.frame === false || !options.useContentSize) {\n    browserWindow.setSize(width, height)\n  }\n\n  if (options.center) {\n    browserWindow.center()\n  }\n\n  if (options.alwaysOnTop) {\n    browserWindow.setAlwaysOnTop(true)\n  }\n\n  if (options.fullscreen) {\n    browserWindow.setFullScreen(true)\n  }\n  browserWindow.setFullScreenable(!!options.fullscreenable)\n\n  let title = options.title\n  if (options.frame === false) {\n    title = undefined\n  } else if (\n    typeof title === 'undefined' &&\n    typeof __command !== 'undefined' &&\n    __command.pluginBundle()\n  ) {\n    title = __command.pluginBundle().name()\n  }\n\n  if (title) {\n    browserWindow.setTitle(title)\n  }\n\n  var backgroundColor = options.backgroundColor\n  if (options.transparent) {\n    backgroundColor = NSColor.clearColor()\n  }\n  if (!backgroundColor && options.frame === false && options.vibrancy) {\n    backgroundColor = NSColor.clearColor()\n  }\n\n  browserWindow._setBackgroundColor(\n    backgroundColor || NSColor.windowBackgroundColor()\n  )\n\n  if (options.hasShadow === false) {\n    browserWindow.setHasShadow(false)\n  }\n\n  if (typeof options.opacity !== 'undefined') {\n    browserWindow.setOpacity(options.opacity)\n  }\n\n  options.webPreferences = options.webPreferences || {}\n\n  webView\n    .configuration()\n    .preferences()\n    .setValue_forKey(\n      options.webPreferences.devTools !== false,\n      'developerExtrasEnabled'\n    )\n  webView\n    .configuration()\n    .preferences()\n    .setValue_forKey(\n      options.webPreferences.javascript !== false,\n      'javaScriptEnabled'\n    )\n  webView\n    .configuration()\n    .preferences()\n    .setValue_forKey(!!options.webPreferences.plugins, 'plugInsEnabled')\n  webView\n    .configuration()\n    .preferences()\n    .setValue_forKey(\n      options.webPreferences.minimumFontSize || 0,\n      'minimumFontSize'\n    )\n\n  if (options.webPreferences.zoomFactor) {\n    webView.setMagnification(options.webPreferences.zoomFactor)\n  }\n\n  var contentView = panel.contentView()\n\n  if (options.frame !== false) {\n    webView.setFrame(contentView.bounds())\n    contentView.addSubview(webView)\n  } else {\n    // In OSX 10.10, adding subviews to the root view for the NSView hierarchy\n    // produces warnings. To eliminate the warnings, we resize the contentView\n    // to fill the window, and add subviews to that.\n    // http://crbug.com/380412\n    contentView.setAutoresizingMask(NSViewWidthSizable | NSViewHeightSizable)\n    fitSubviewToView(contentView, contentView.superview())\n\n    webView.setFrame(contentView.bounds())\n    contentView.addSubview(webView)\n\n    // The fullscreen button should always be hidden for frameless window.\n    if (panel.standardWindowButton(NSWindowFullScreenButton)) {\n      panel.standardWindowButton(NSWindowFullScreenButton).setHidden(true)\n    }\n\n    if (!options.titleBarStyle || options.titleBarStyle === 'default') {\n      // Hide the window buttons.\n      panel.standardWindowButton(NSWindowZoomButton).setHidden(true)\n      panel.standardWindowButton(NSWindowMiniaturizeButton).setHidden(true)\n      panel.standardWindowButton(NSWindowCloseButton).setHidden(true)\n\n      // Some third-party macOS utilities check the zoom button's enabled state to\n      // determine whether to show custom UI on hover, so we disable it here to\n      // prevent them from doing so in a frameless app window.\n      panel.standardWindowButton(NSWindowZoomButton).setEnabled(false)\n    }\n  }\n\n  if (options.vibrancy) {\n    browserWindow.setVibrancy(options.vibrancy)\n  }\n\n  // Set maximizable state last to ensure zoom button does not get reset\n  // by calls to other APIs.\n  browserWindow.setMaximizable(options.maximizable !== false)\n\n  panel.setHidesOnDeactivate(options.hidesOnDeactivate !== false)\n\n  if (options.remembersWindowFrame) {\n    panel.setFrameAutosaveName(identifier)\n    panel.setFrameUsingName_force(panel.frameAutosaveName(), false)\n  }\n\n  if (options.acceptsFirstMouse) {\n    browserWindow.on('focus', function(event) {\n      if (event.type() === NSEventTypeLeftMouseDown) {\n        browserWindow.webContents\n          .executeJavaScript(dispatchFirstClick(webView, event))\n          .catch(() => {})\n      }\n    })\n  }\n\n  executeJavaScript.injectScript(webView)\n  movableArea.injectScript(webView)\n  movableArea.setupHandler(browserWindow)\n\n  if (options.show !== false) {\n    browserWindow.show()\n  }\n\n  browserWindow.on('closed', function() {\n    browserWindow._destroyed = true\n    threadDictionary.removeObjectForKey(identifier)\n    var observer = threadDictionary[identifier + '.themeObserver']\n    if (observer) {\n      NSApplication.sharedApplication().removeObserver_forKeyPath(\n        observer,\n        'effectiveAppearance'\n      )\n      threadDictionary.removeObjectForKey(identifier + '.themeObserver')\n    }\n    fiber.cleanup()\n  })\n\n  threadDictionary[identifier] = panel\n\n  fiber.onCleanup(function() {\n    if (!browserWindow._destroyed) {\n      browserWindow.destroy()\n    }\n  })\n\n  return browserWindow\n}\n\nBrowserWindow.fromId = function(identifier) {\n  var threadDictionary = NSThread.mainThread().threadDictionary()\n\n  if (threadDictionary[identifier]) {\n    return BrowserWindow.fromPanel(threadDictionary[identifier], identifier)\n  }\n\n  return undefined\n}\n\nBrowserWindow.fromPanel = function(panel, identifier) {\n  var browserWindow = new EventEmitter()\n  browserWindow.id = identifier\n\n  if (!panel || !panel.contentView) {\n    throw new Error('needs to pass an NSPanel')\n  }\n\n  var webView = null\n  var subviews = panel.contentView().subviews()\n  for (var i = 0; i < subviews.length; i += 1) {\n    if (\n      !webView &&\n      !subviews[i].isKindOfClass(WKInspectorWKWebView) &&\n      subviews[i].isKindOfClass(WKWebView)\n    ) {\n      webView = subviews[i]\n    }\n  }\n\n  if (!webView) {\n    throw new Error('The panel needs to have a webview')\n  }\n\n  buildBrowserAPI(browserWindow, panel, webView)\n  buildWebAPI(browserWindow, panel, webView)\n\n  return browserWindow\n}\n\nmodule.exports = BrowserWindow\n","var CONSTANTS = require('./constants')\n\nmodule.exports = function(webView) {\n  var source =\n    'window.originalPostMessage = window.postMessage;' +\n    'window.postMessage = function(actionName) {' +\n    '  if (!actionName) {' +\n    \"    throw new Error('missing action name')\" +\n    '  }' +\n    '  var id = String(Math.random()).replace(\".\", \"\");' +\n    '    var args = [].slice.call(arguments);' +\n    '    args.unshift(id);' +\n    '  return new Promise(function (resolve, reject) {' +\n    '    window[\"' +\n    CONSTANTS.JS_BRIDGE_RESULT_SUCCESS +\n    '\" + id] = resolve;' +\n    '    window[\"' +\n    CONSTANTS.JS_BRIDGE_RESULT_ERROR +\n    '\" + id] = reject;' +\n    '    window.webkit.messageHandlers.' +\n    CONSTANTS.JS_BRIDGE +\n    '.postMessage(JSON.stringify(args));' +\n    '  });' +\n    '}'\n  var script = WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(\n    source,\n    0,\n    true\n  )\n  webView\n    .configuration()\n    .userContentController()\n    .addUserScript(script)\n}\n","var CONSTANTS = require('./constants')\n\nmodule.exports.injectScript = function(webView) {\n  var source =\n    '(function () {' +\n    \"document.addEventListener('mousedown', onMouseDown);\" +\n    '' +\n    'function shouldDrag(target) {' +\n    '  if (!target || (target.dataset || {}).appRegion === \"no-drag\") { return false }' +\n    '  if ((target.dataset || {}).appRegion === \"drag\") { return true }' +\n    '  return shouldDrag(target.parentElement)' +\n    '};' +\n    '' +\n    'function onMouseDown(e) {' +\n    '  if (e.button !== 0 || !shouldDrag(e.target)) { return }' +\n    '  window.postMessage(\"' +\n    CONSTANTS.START_MOVING_WINDOW +\n    '\");' +\n    '};' +\n    '})()'\n  var script = WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(\n    source,\n    0,\n    true\n  )\n  webView\n    .configuration()\n    .userContentController()\n    .addUserScript(script)\n}\n\nmodule.exports.setupHandler = function(browserWindow) {\n  var initialMouseLocation = null\n  var initialWindowPosition = null\n  var interval = null\n\n  function moveWindow() {\n    // if the user released the button, stop moving the window\n    if (!initialWindowPosition || NSEvent.pressedMouseButtons() !== 1) {\n      clearInterval(interval)\n      initialMouseLocation = null\n      initialWindowPosition = null\n      return\n    }\n\n    var mouse = NSEvent.mouseLocation()\n    browserWindow.setPosition(\n      initialWindowPosition.x + (mouse.x - initialMouseLocation.x),\n      initialWindowPosition.y + (initialMouseLocation.y - mouse.y), // y is inverted\n      false\n    )\n  }\n\n  browserWindow.webContents.on(CONSTANTS.START_MOVING_WINDOW, function() {\n    initialMouseLocation = NSEvent.mouseLocation()\n    var position = browserWindow.getPosition()\n    initialWindowPosition = {\n      x: position[0],\n      y: position[1],\n    }\n\n    interval = setInterval(moveWindow, 1000 / 60) // 60 fps\n  })\n}\n","module.exports = function(webArguments) {\n  var args = null\n  try {\n    args = JSON.parse(webArguments)\n  } catch (e) {\n    // malformed arguments\n  }\n\n  if (\n    !args ||\n    !args.constructor ||\n    args.constructor !== Array ||\n    args.length == 0\n  ) {\n    return null\n  }\n\n  return args\n}\n","var ObjCClass = require('mocha-js-delegate')\nvar parseWebArguments = require('./parseWebArguments')\nvar CONSTANTS = require('./constants')\n\n// We create one ObjC class for ourselves here\nvar WindowDelegateClass\nvar NavigationDelegateClass\nvar WebScriptHandlerClass\nvar ThemeObserverClass\n\n// TODO: events\n// - 'page-favicon-updated'\n// - 'new-window'\n// - 'did-navigate-in-page'\n// - 'will-prevent-unload'\n// - 'crashed'\n// - 'unresponsive'\n// - 'responsive'\n// - 'destroyed'\n// - 'before-input-event'\n// - 'certificate-error'\n// - 'found-in-page'\n// - 'media-started-playing'\n// - 'media-paused'\n// - 'did-change-theme-color'\n// - 'update-target-url'\n// - 'cursor-changed'\n// - 'context-menu'\n// - 'select-bluetooth-device'\n// - 'paint'\n// - 'console-message'\n\nmodule.exports = function(browserWindow, panel, webview, options) {\n  if (!ThemeObserverClass) {\n    ThemeObserverClass = new ObjCClass({\n      utils: null,\n\n      'observeValueForKeyPath:ofObject:change:context:': function() {\n        this.utils.executeJavaScript(\n          \"document.body.classList.remove('__skpm-\" +\n            (typeof MSTheme !== 'undefined' && MSTheme.sharedTheme().isDark()\n              ? 'light'\n              : 'dark') +\n            \"'); document.body.classList.add('__skpm-\" +\n            (typeof MSTheme !== 'undefined' && MSTheme.sharedTheme().isDark()\n              ? 'dark'\n              : 'light') +\n            \"')\"\n        )\n      },\n    })\n  }\n\n  if (!WindowDelegateClass) {\n    WindowDelegateClass = new ObjCClass({\n      utils: null,\n      panel: null,\n\n      'windowDidResize:': function() {\n        this.utils.emit('resize')\n      },\n\n      'windowDidMiniaturize:': function() {\n        this.utils.emit('minimize')\n      },\n\n      'windowDidDeminiaturize:': function() {\n        this.utils.emit('restore')\n      },\n\n      'windowDidEnterFullScreen:': function() {\n        this.utils.emit('enter-full-screen')\n      },\n\n      'windowDidExitFullScreen:': function() {\n        this.utils.emit('leave-full-screen')\n      },\n\n      'windowDidMove:': function() {\n        this.utils.emit('move')\n        this.utils.emit('moved')\n      },\n\n      'windowShouldClose:': function() {\n        var shouldClose = 1\n        this.utils.emit('close', {\n          get defaultPrevented() {\n            return !shouldClose\n          },\n          preventDefault: function() {\n            shouldClose = 0\n          },\n        })\n        return shouldClose\n      },\n\n      'windowWillClose:': function() {\n        this.utils.emit('closed')\n      },\n\n      'windowDidBecomeKey:': function() {\n        this.utils.emit('focus', this.panel.currentEvent())\n      },\n\n      'windowDidResignKey:': function() {\n        this.utils.emit('blur')\n      },\n    })\n  }\n\n  if (!NavigationDelegateClass) {\n    NavigationDelegateClass = new ObjCClass({\n      state: {\n        wasReady: 0,\n      },\n      utils: null,\n\n      // // Called when the web view begins to receive web content.\n      'webView:didCommitNavigation:': function(webView) {\n        this.utils.emit('will-navigate', {}, String(String(webView.URL())))\n      },\n\n      // // Called when web content begins to load in a web view.\n      'webView:didStartProvisionalNavigation:': function() {\n        this.utils.emit('did-start-navigation')\n        this.utils.emit('did-start-loading')\n      },\n\n      // Called when a web view receives a server redirect.\n      'webView:didReceiveServerRedirectForProvisionalNavigation:': function() {\n        this.utils.emit('did-get-redirect-request')\n      },\n\n      // // Called when the web view needs to respond to an authentication challenge.\n      // 'webView:didReceiveAuthenticationChallenge:completionHandler:': function(\n      //   webView,\n      //   challenge,\n      //   completionHandler\n      // ) {\n      //   function callback(username, password) {\n      //     completionHandler(\n      //       0,\n      //       NSURLCredential.credentialWithUser_password_persistence(\n      //         username,\n      //         password,\n      //         1\n      //       )\n      //     )\n      //   }\n      //   var protectionSpace = challenge.protectionSpace()\n      //   this.utils.emit(\n      //     'login',\n      //     {},\n      //     {\n      //       method: String(protectionSpace.authenticationMethod()),\n      //       url: 'not implemented', // TODO:\n      //       referrer: 'not implemented', // TODO:\n      //     },\n      //     {\n      //       isProxy: !!protectionSpace.isProxy(),\n      //       scheme: String(protectionSpace.protocol()),\n      //       host: String(protectionSpace.host()),\n      //       port: Number(protectionSpace.port()),\n      //       realm: String(protectionSpace.realm()),\n      //     },\n      //     callback\n      //   )\n      // },\n\n      // Called when an error occurs during navigation.\n      // 'webView:didFailNavigation:withError:': function(\n      //   webView,\n      //   navigation,\n      //   error\n      // ) {},\n\n      // Called when an error occurs while the web view is loading content.\n      'webView:didFailProvisionalNavigation:withError:': function(\n        webView,\n        navigation,\n        error\n      ) {\n        this.utils.emit('did-fail-load', error)\n      },\n\n      // Called when the navigation is complete.\n      'webView:didFinishNavigation:': function() {\n        if (this.state.wasReady == 0) {\n          this.state.wasReady = 1\n          this.utils.emitBrowserEvent('ready-to-show')\n        }\n        this.utils.emit('did-navigate')\n        this.utils.emit('did-frame-navigate')\n        this.utils.emit('did-stop-loading')\n        this.utils.emit('did-finish-load')\n        this.utils.emit('did-frame-finish-load')\n      },\n\n      // Called when the web view’s web content process is terminated.\n      'webViewWebContentProcessDidTerminate:': function() {\n        this.utils.emit('dom-ready')\n      },\n\n      // Decides whether to allow or cancel a navigation.\n      // webView:decidePolicyForNavigationAction:decisionHandler:\n\n      // Decides whether to allow or cancel a navigation after its response is known.\n      // webView:decidePolicyForNavigationResponse:decisionHandler:\n    })\n  }\n\n  if (!WebScriptHandlerClass) {\n    WebScriptHandlerClass = new ObjCClass({\n      utils: null,\n      'userContentController:didReceiveScriptMessage:': function(_, message) {\n        var args = this.utils.parseWebArguments(String(message.body()))\n        if (!args) {\n          return\n        }\n        if (!args[0] || typeof args[0] !== 'string') {\n          return\n        }\n        args[0] = String(args[0])\n\n        this.utils.emit.apply(this, args)\n      },\n    })\n  }\n\n  var themeObserver = ThemeObserverClass.new({\n    utils: {\n      executeJavaScript(script) {\n        webview.evaluateJavaScript_completionHandler(script, null)\n      },\n    },\n  })\n\n  var script = WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(\n    \"document.addEventListener('DOMContentLoaded', function() { document.body.classList.add('__skpm-\" +\n      (typeof MSTheme !== 'undefined' && MSTheme.sharedTheme().isDark()\n        ? 'dark'\n        : 'light') +\n      \"') }, false)\",\n    0,\n    true\n  )\n  webview\n    .configuration()\n    .userContentController()\n    .addUserScript(script)\n\n  NSApplication.sharedApplication().addObserver_forKeyPath_options_context(\n    themeObserver,\n    'effectiveAppearance',\n    NSKeyValueChangeNewKey,\n    null\n  )\n\n  var threadDictionary = NSThread.mainThread().threadDictionary()\n  threadDictionary[browserWindow.id + '.themeObserver'] = themeObserver\n\n  var navigationDelegate = NavigationDelegateClass.new({\n    utils: {\n      setTitle: browserWindow.setTitle.bind(browserWindow),\n      emitBrowserEvent() {\n        try {\n          browserWindow.emit.apply(browserWindow, arguments)\n        } catch (err) {\n          if (\n            typeof process !== 'undefined' &&\n            process.listenerCount &&\n            process.listenerCount('uncaughtException')\n          ) {\n            process.emit('uncaughtException', err, 'uncaughtException')\n          } else {\n            console.error(err)\n            throw err\n          }\n        }\n      },\n      emit() {\n        try {\n          browserWindow.webContents.emit.apply(\n            browserWindow.webContents,\n            arguments\n          )\n        } catch (err) {\n          if (\n            typeof process !== 'undefined' &&\n            process.listenerCount &&\n            process.listenerCount('uncaughtException')\n          ) {\n            process.emit('uncaughtException', err, 'uncaughtException')\n          } else {\n            console.error(err)\n            throw err\n          }\n        }\n      },\n    },\n    state: {\n      wasReady: 0,\n    },\n  })\n\n  webview.setNavigationDelegate(navigationDelegate)\n\n  var webScriptHandler = WebScriptHandlerClass.new({\n    utils: {\n      emit(id, type) {\n        if (!type) {\n          webview.evaluateJavaScript_completionHandler(\n            CONSTANTS.JS_BRIDGE_RESULT_SUCCESS + id + '()',\n            null\n          )\n          return\n        }\n\n        var args = []\n        for (var i = 2; i < arguments.length; i += 1) args.push(arguments[i])\n\n        var listeners = browserWindow.webContents.listeners(type)\n\n        Promise.all(\n          listeners.map(function(l) {\n            return Promise.resolve().then(function() {\n              return l.apply(l, args)\n            })\n          })\n        )\n          .then(function(res) {\n            webview.evaluateJavaScript_completionHandler(\n              CONSTANTS.JS_BRIDGE_RESULT_SUCCESS +\n                id +\n                '(' +\n                JSON.stringify(res) +\n                ')',\n              null\n            )\n          })\n          .catch(function(err) {\n            webview.evaluateJavaScript_completionHandler(\n              CONSTANTS.JS_BRIDGE_RESULT_ERROR +\n                id +\n                '(' +\n                JSON.stringify(err) +\n                ')',\n              null\n            )\n          })\n      },\n      parseWebArguments: parseWebArguments,\n    },\n  })\n\n  webview\n    .configuration()\n    .userContentController()\n    .addScriptMessageHandler_name(webScriptHandler, CONSTANTS.JS_BRIDGE)\n\n  var utils = {\n    emit() {\n      try {\n        browserWindow.emit.apply(browserWindow, arguments)\n      } catch (err) {\n        if (\n          typeof process !== 'undefined' &&\n          process.listenerCount &&\n          process.listenerCount('uncaughtException')\n        ) {\n          process.emit('uncaughtException', err, 'uncaughtException')\n        } else {\n          console.error(err)\n          throw err\n        }\n      }\n    },\n  }\n  if (options.modal) {\n    // find the window of the document\n    var msdocument\n    if (options.parent.type === 'Document') {\n      msdocument = options.parent.sketchObject\n    } else {\n      msdocument = options.parent\n    }\n    if (msdocument && String(msdocument.class()) === 'MSDocumentData') {\n      // we only have an MSDocumentData instead of a MSDocument\n      // let's try to get back to the MSDocument\n      msdocument = msdocument.delegate()\n    }\n    utils.parentWindow = msdocument.windowForSheet()\n  }\n\n  var windowDelegate = WindowDelegateClass.new({\n    utils: utils,\n    panel: panel,\n  })\n\n  panel.setDelegate(windowDelegate)\n}\n","var EventEmitter = require('events')\nvar executeJavaScript = require('./execute-javascript')\n\n// let's try to match https://github.com/electron/electron/blob/master/docs/api/web-contents.md\nmodule.exports = function buildAPI(browserWindow, panel, webview) {\n  var webContents = new EventEmitter()\n\n  webContents.loadURL = browserWindow.loadURL\n\n  webContents.loadFile = function(/* filePath */) {\n    // TODO:\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n\n  webContents.downloadURL = function(/* filePath */) {\n    // TODO:\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n\n  webContents.getURL = function() {\n    return String(webview.url())\n  }\n\n  webContents.getTitle = function() {\n    return String(webview.title())\n  }\n\n  webContents.isDestroyed = function() {\n    // TODO:\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n\n  webContents.focus = browserWindow.focus\n  webContents.isFocused = browserWindow.isFocused\n\n  webContents.isLoading = function() {\n    return !!webview.loading()\n  }\n\n  webContents.isLoadingMainFrame = function() {\n    // TODO:\n    return !!webview.loading()\n  }\n\n  webContents.isWaitingForResponse = function() {\n    return !webview.loading()\n  }\n\n  webContents.stop = function() {\n    webview.stopLoading()\n  }\n  webContents.reload = function() {\n    webview.reload()\n  }\n  webContents.reloadIgnoringCache = function() {\n    webview.reloadFromOrigin()\n  }\n  webContents.canGoBack = function() {\n    return !!webview.canGoBack()\n  }\n  webContents.canGoForward = function() {\n    return !!webview.canGoForward()\n  }\n  webContents.canGoToOffset = function(offset) {\n    return !!webview.backForwardList().itemAtIndex(offset)\n  }\n  webContents.clearHistory = function() {\n    // TODO:\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n  webContents.goBack = function() {\n    webview.goBack()\n  }\n  webContents.goForward = function() {\n    webview.goForward()\n  }\n  webContents.goToIndex = function(index) {\n    var backForwardList = webview.backForwardList()\n    var backList = backForwardList.backList()\n    var backListLength = backList.count()\n    if (backListLength > index) {\n      webview.loadRequest(NSURLRequest.requestWithURL(backList[index]))\n      return\n    }\n    var forwardList = backForwardList.forwardList()\n    if (forwardList.count() > index - backListLength) {\n      webview.loadRequest(\n        NSURLRequest.requestWithURL(forwardList[index - backListLength])\n      )\n      return\n    }\n    throw new Error('Cannot go to index ' + index)\n  }\n  webContents.goToOffset = function(offset) {\n    if (!webContents.canGoToOffset(offset)) {\n      throw new Error('Cannot go to offset ' + offset)\n    }\n    webview.loadRequest(\n      NSURLRequest.requestWithURL(webview.backForwardList().itemAtIndex(offset))\n    )\n  }\n  webContents.isCrashed = function() {\n    // TODO:\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n  webContents.setUserAgent = function(/* userAgent */) {\n    // TODO:\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n  webContents.getUserAgent = function() {\n    const userAgent = webview.customUserAgent()\n    return userAgent ? String(userAgent) : undefined\n  }\n  webContents.insertCSS = function(css) {\n    var source =\n      \"var style = document.createElement('style'); style.innerHTML = \" +\n      css.replace(/\"/, '\\\\\"') +\n      '; document.head.appendChild(style);'\n    var script = WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(\n      source,\n      0,\n      true\n    )\n    webview\n      .configuration()\n      .userContentController()\n      .addUserScript(script)\n  }\n  webContents.insertJS = function(source) {\n    var script = WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(\n      source,\n      0,\n      true\n    )\n    webview\n      .configuration()\n      .userContentController()\n      .addUserScript(script)\n  }\n  webContents.executeJavaScript = executeJavaScript(webview, browserWindow)\n  webContents.setIgnoreMenuShortcuts = function() {\n    // TODO:??\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n  webContents.setAudioMuted = function(/* muted */) {\n    // TODO:??\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n  webContents.isAudioMuted = function() {\n    // TODO:??\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n  webContents.setZoomFactor = function(factor) {\n    webview.setMagnification_centeredAtPoint(factor, CGPointMake(0, 0))\n  }\n  webContents.getZoomFactor = function(callback) {\n    callback(Number(webview.magnification()))\n  }\n  webContents.setZoomLevel = function(level) {\n    // eslint-disable-next-line no-restricted-properties\n    webContents.setZoomFactor(Math.pow(1.2, level))\n  }\n  webContents.getZoomLevel = function(callback) {\n    // eslint-disable-next-line no-restricted-properties\n    callback(Math.log(Number(webview.magnification())) / Math.log(1.2))\n  }\n  webContents.setVisualZoomLevelLimits = function(/* minimumLevel, maximumLevel */) {\n    // TODO:??\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n  webContents.setLayoutZoomLevelLimits = function(/* minimumLevel, maximumLevel */) {\n    // TODO:??\n    console.warn(\n      'Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)'\n    )\n  }\n\n  // TODO:\n  // webContents.undo = function() {\n  //   webview.undoManager().undo()\n  // }\n  // webContents.redo = function() {\n  //   webview.undoManager().redo()\n  // }\n  // webContents.cut = webview.cut\n  // webContents.copy = webview.copy\n  // webContents.paste = webview.paste\n  // webContents.pasteAndMatchStyle = webview.pasteAsRichText\n  // webContents.delete = webview.delete\n  // webContents.replace = webview.replaceSelectionWithText\n\n  webContents.send = function() {\n    const script =\n      'window.postMessage({' +\n      'isSketchMessage: true,' +\n      \"origin: '\" +\n      String(__command.identifier()) +\n      \"',\" +\n      'args: ' +\n      JSON.stringify([].slice.call(arguments)) +\n      '}, \"*\")'\n    webview.evaluateJavaScript_completionHandler(script, null)\n  }\n\n  webContents.getNativeWebview = function() {\n    return webview\n  }\n\n  browserWindow.webContents = webContents\n}\n","/* globals NSThread */\nvar threadDictionary = NSThread.mainThread().threadDictionary()\n\nmodule.exports.getWebview = function(identifier) {\n  return require('./lib').fromId(identifier) // eslint-disable-line\n}\n\nmodule.exports.isWebviewPresent = function isWebviewPresent(identifier) {\n  return !!threadDictionary[identifier]\n}\n\nmodule.exports.sendToWebview = function sendToWebview(identifier, evalString) {\n  if (!module.exports.isWebviewPresent(identifier)) {\n    return\n  }\n\n  var panel = threadDictionary[identifier]\n  var webview = null\n  var subviews = panel.contentView().subviews()\n  for (var i = 0; i < subviews.length; i += 1) {\n    if (\n      !webview &&\n      !subviews[i].isKindOfClass(WKInspectorWKWebView) &&\n      subviews[i].isKindOfClass(WKWebView)\n    ) {\n      webview = subviews[i]\n    }\n  }\n\n  if (!webview || !webview.evaluateJavaScript_completionHandler) {\n    throw new Error('Webview ' + identifier + ' not found')\n  }\n\n  webview.evaluateJavaScript_completionHandler(evalString, null)\n}\n","const processMask = ({ layer, sketch }) => {\n    return new Promise((resolve, reject) => {\n        if (layer && layer.sketchObject.hasClippingMask()) {\n            const maskIndex = layer.index;\n            const maskParent = layer.parent;\n            layer.sketchObject.setHasClippingMask(false);\n            // create new group to mimic mask behavior\n            const maskGroup = new sketch.Group({\n                name: 'srm.mask',\n                frame: layer.frame,\n                layers: [layer.duplicate()]\n            });\n            // splice in mask group, splice out old mask\n            maskParent.layers.splice(maskIndex, 1, maskGroup);\n            // loop through mask parent layers,\n            // any layer with an index higher than the mask will be masked\n            // push masked layers to maskGroup\n            maskGroup.parent.layers.forEach((maskedLayer, index) => {\n                if (index > maskIndex) {\n                    maskedLayer.frame.x = maskedLayer.frame.x - maskGroup.frame.x;\n                    maskedLayer.frame.y = maskedLayer.frame.y - maskGroup.frame.y;\n                    maskGroup.layers.push(maskedLayer);\n                }\n            });\n            resolve(maskGroup);\n        }\n        else {\n            resolve(layer);\n        }\n    });\n};\nconst isPathClockwise = (points) => {\n    let end = points.length - 1;\n    let sum = points[end].point.x * points[0].point.y - points[0].point.x * points[end].point.y;\n    for (let i = 0; i < end; i++) {\n        const n = i + 1;\n        sum += points[i].point.x * points[n].point.y - points[n].point.x * points[i].point.y;\n    }\n    return sum > 0;\n};\nconst flattenShapePath = ({ layer, sketch }) => {\n    return new Promise((resolve, reject) => {\n        // due to the way PIXI draws lines\n        // the path must be clockwise to render correctly\n        const isClockwise = isPathClockwise(layer.points);\n        if (!isClockwise) {\n            layer.sketchObject.reversePath();\n        }\n        const duplicate = layer.duplicate();\n        duplicate.transform.rotation = 0;\n        duplicate.transform.flippedHorizontally = false;\n        duplicate.transform.flippedVertically = false;\n        const svgPath = duplicate.getSVGPath();\n        const flatPath = sketch.ShapePath.fromSVGPath(svgPath);\n        layer.points = flatPath.points;\n        duplicate.remove();\n        resolve(layer);\n    });\n};\nconst processShapePathBorderOptions = ({ layer }) => {\n    return new Promise((resolve, reject) => {\n        const { parent, index, style } = layer;\n        const { borderOptions } = style;\n        if (borderOptions.dashPattern.length > 0 || borderOptions.startArrowhead !== 'None' || borderOptions.endArrowhead !== 'None') {\n            layer.sketchObject.layersByConvertingToOutlines();\n            const outlines = parent.layers[index];\n            outlines.name = `[srm.with-border-options]${layer.name}`;\n            outlines.sketchObject.simplify();\n            resolve(outlines);\n        }\n        else {\n            resolve(layer);\n        }\n    });\n};\nconst processShapePath = ({ layer, sketch }) => {\n    return new Promise((resolve, reject) => {\n        if (layer && layer.type === 'ShapePath') {\n            flattenShapePath({\n                layer: layer,\n                sketch: sketch\n            })\n                .then((layerS1) => {\n                return processShapePathBorderOptions({\n                    layer: layerS1\n                });\n            })\n                .then((layerS2) => {\n                resolve(layerS2);\n            });\n        }\n        else {\n            resolve(layer);\n        }\n    });\n};\nconst processShapeBase = ({ layer }) => {\n    return new Promise((resolve, reject) => {\n        const { style, parent, index } = layer;\n        if (layer.sketchObject.canFlatten()) {\n            layer.sketchObject.flatten();\n            resolve(parent.layers[index]);\n        }\n        else {\n            if (layer.layers.length === 1) {\n                layer.sketchObject.ungroup();\n                const ungrouped = parent.layers[index];\n                ungrouped.style = style;\n                resolve(ungrouped);\n            }\n            else {\n                resolve(layer);\n            }\n        }\n    });\n};\nconst processShape = ({ layer, sketch }) => {\n    return new Promise((resolve, reject) => {\n        if (layer && layer.type === 'Shape') {\n            processShapeBase({\n                layer: layer\n            })\n                // .then((layerS1) => {\n                //   if (layerS1.type === 'Shape') {\n                //     return processShapeLayers({\n                //       layer: layerS1 as srm.Shape,\n                //       sketch: sketch\n                //     });\n                //   } else {\n                //     resolve(layerS1);\n                //   }\n                // })\n                .then((layerS2) => {\n                resolve(layerS2);\n            });\n        }\n        else {\n            resolve(layer);\n        }\n    });\n};\nconst processRelevant = ({ layer }) => {\n    return new Promise((resolve, reject) => {\n        switch (layer.type) {\n            case 'Group':\n            case 'Shape':\n            case 'Image':\n            case 'ShapePath':\n            case 'Text':\n            case 'SymbolInstance':\n                resolve(layer);\n                break;\n            case 'HotSpot':\n            case 'Slice':\n                layer.remove();\n                resolve(null);\n                break;\n        }\n    });\n};\nconst processHidden = ({ layer }) => {\n    return new Promise((resolve, reject) => {\n        const isHidden = layer && layer.hidden;\n        if (isHidden) {\n            layer.remove();\n            resolve(null);\n        }\n        else {\n            resolve(layer);\n        }\n    });\n};\nconst processSymbol = ({ layer }) => {\n    return new Promise((resolve, reject) => {\n        if (layer && layer.type === 'SymbolInstance') {\n            resolve(layer.detach({\n                recursively: true\n            }));\n        }\n        else {\n            resolve(layer);\n        }\n    });\n};\nconst processText = ({ layer, sketch }) => {\n    return new Promise((resolve, reject) => {\n        if (layer && layer.type === 'Text') {\n            if (layer.text.trim().length === 0) {\n                layer.remove();\n                resolve(null);\n            }\n            else {\n                const layerIndex = layer.index;\n                const parent = layer.parent;\n                layer.sketchObject.layersByConvertingToOutlines();\n                const outlines = parent.layers[layerIndex];\n                outlines.name = `[srm.text]${layer.name}`;\n                // because sketch is bugged\n                outlines.sketchObject.simplify();\n                // because pixi is bugged\n                outlines.sketchObject.reversePath();\n                resolve(outlines);\n            }\n        }\n        else {\n            resolve(layer);\n        }\n    });\n};\nconst processLayer = ({ layer, sketch, page }) => {\n    return new Promise((resolve, reject) => {\n        processRelevant({\n            layer: layer\n        })\n            .then((layerS1) => {\n            return processHidden({\n                layer: layerS1\n            });\n        })\n            .then((layerS2) => {\n            return processSymbol({\n                layer: layerS2\n            });\n        })\n            .then((layerS3) => {\n            return processShape({\n                layer: layerS3,\n                sketch: sketch\n            });\n        })\n            .then((layerS4) => {\n            return processShapePath({\n                layer: layerS4,\n                sketch: sketch\n            });\n        })\n            .then((layerS5) => {\n            return processMask({\n                layer: layerS5,\n                sketch: sketch\n            });\n        })\n            .then((layerS6) => {\n            return processText({\n                layer: layerS6,\n                sketch: sketch\n            });\n        })\n            .then((layerS7) => {\n            if (layerS7 && layerS7.type === 'Group') {\n                processLayers({\n                    layers: layerS7.layers,\n                    sketch: sketch,\n                    page: page\n                })\n                    .then(() => {\n                    resolve();\n                });\n            }\n            else {\n                resolve();\n            }\n        });\n    });\n};\nconst processLayers = ({ layers, sketch, page }) => {\n    const promises = [];\n    layers.forEach((layer) => {\n        promises.push(processLayer({\n            layer: layer,\n            sketch: sketch,\n            page: page\n        }));\n    });\n    return Promise.all(promises);\n};\nconst getArtboard = ({ artboard, sketch, page }) => {\n    return new Promise((resolve, reject) => {\n        processLayers({\n            layers: artboard.layers,\n            sketch: sketch,\n            page: page\n        })\n            .then(() => {\n            resolve();\n        });\n    });\n};\nexport default getArtboard;\n","import processImageLayerAssets from './imageAssets';\nimport processShapeLayerAssets from './shapeAssets';\nimport processGroupLayerAssets from './groupAssets';\nexport const clearLayerStyles = ({ layer, page }) => {\n    return new Promise((resolve, reject) => {\n        const { style, transform } = layer;\n        if (layer.type === 'Text') {\n            style.textColor = '#000000ff';\n            layer.sketchObject.setTextBehaviour(0);\n        }\n        // @ts-ignore\n        layer.parent = page;\n        style.opacity = 1;\n        style.borders = [];\n        style.fills = [];\n        style.shadows = [];\n        style.innerShadows = [];\n        style.blur = {\n            blurType: 'Gaussian',\n            radius: 0,\n            motionAngle: 0,\n            center: { x: 0, y: 0 },\n            enabled: false\n        };\n        transform.flippedHorizontally = false;\n        transform.flippedVertically = false;\n        transform.rotation = 0;\n        resolve(layer);\n    });\n};\nexport const generateImageAsset = ({ layer, sketch, id, prefix, scale }) => {\n    return new Promise((resolve, reject) => {\n        // create buffer from layer\n        const buffer = sketch.export(layer, {\n            formats: 'png',\n            scales: scale ? scale : '1',\n            output: false,\n            ['save-for-web']: true\n        });\n        // create image layer from buffer\n        const bufferImg = new sketch.Image({\n            image: buffer\n        });\n        // get base64 from image layer nsdata\n        const base64 = bufferImg.image.nsdata.base64EncodedStringWithOptions(0);\n        // create base64 string\n        const base64String = `data:image/png;base64,${base64}`;\n        // return final image\n        resolve({\n            id: prefix ? `${prefix}${id}` : id,\n            src: base64String,\n        });\n    });\n};\nconst createGradientBorderImage = ({ page, layer, border, gradientOpacity, sketch, prefix }) => {\n    return new Promise((resolve, reject) => {\n        const padding = () => {\n            switch (border.position) {\n                case 'Outside':\n                    return border.thickness;\n                case 'Center':\n                    return border.thickness / 2;\n                case 'Inside':\n                    return 0;\n            }\n        };\n        // create new layer with gradient\n        const gradientImage = new sketch.ShapePath({\n            parent: page,\n            frame: Object.assign(Object.assign({}, layer.frame), { width: layer.frame.width + padding(), height: layer.frame.height + padding() }),\n            style: {\n                fills: [{\n                        fillType: 'Gradient',\n                        gradient: border.gradient\n                    }],\n                borders: [],\n                opacity: gradientOpacity\n            }\n        });\n        // export image to temp dir\n        generateImageAsset({\n            layer: gradientImage,\n            sketch: sketch,\n            id: layer.id,\n            prefix: prefix\n        })\n            .then((imageAsset) => {\n            // remove image from page\n            gradientImage.remove();\n            // return final image\n            resolve(imageAsset);\n        });\n    });\n};\nconst createGradientFillImage = ({ page, layer, gradient, gradientOpacity, sketch, prefix }) => {\n    return new Promise((resolve, reject) => {\n        // create new layer with gradient\n        const gradientImage = new sketch.ShapePath({\n            parent: page,\n            frame: layer.frame,\n            style: {\n                fills: [{\n                        fillType: 'Gradient',\n                        gradient: gradient\n                    }],\n                borders: [],\n                opacity: gradientOpacity\n            }\n        });\n        // export image to temp dir\n        generateImageAsset({\n            layer: gradientImage,\n            sketch: sketch,\n            id: layer.id,\n            prefix: prefix\n        })\n            .then((imageAsset) => {\n            // remove image from page\n            gradientImage.remove();\n            // return final image\n            resolve(imageAsset);\n        });\n    });\n};\nconst createPatternFillImage = ({ page, layer, pattern, fillOpacity, sketch, prefix }) => {\n    return new Promise((resolve, reject) => {\n        // create new layer with pattern\n        // add transparent border to include any layer whitespace\n        const patternImage = new sketch.ShapePath({\n            parent: page,\n            frame: layer.frame,\n            style: {\n                fills: [{\n                        fillType: 'Pattern',\n                        pattern: pattern\n                    }],\n                borders: [{\n                        fillType: 'Color',\n                        position: 'Inside',\n                        color: '#00000001'\n                    }],\n                opacity: fillOpacity\n            }\n        });\n        // generate base64 image from layer\n        generateImageAsset({\n            layer: patternImage,\n            sketch: sketch,\n            id: layer.id,\n            prefix: prefix\n        })\n            .then((imageAsset) => {\n            // remove image from page\n            patternImage.remove();\n            // return final base64 image\n            resolve(imageAsset);\n        });\n    });\n};\nconst processLayerBorderGradient = ({ page, layer, border, borderIndex, sketch }) => {\n    return new Promise((resolve, reject) => {\n        createGradientBorderImage({\n            page: page,\n            layer: layer,\n            border: border,\n            gradientOpacity: border.sketchObject.contextSettings().opacity(),\n            sketch: sketch,\n            prefix: `[border-${borderIndex}]`\n        })\n            .then((gradientBorderImage) => {\n            resolve(gradientBorderImage);\n        });\n    });\n};\nconst processLayerFillGradient = ({ page, layer, fill, fillIndex, sketch }) => {\n    return new Promise((resolve, reject) => {\n        createGradientFillImage({\n            page: page,\n            layer: layer,\n            gradient: fill.gradient,\n            gradientOpacity: fill.sketchObject.contextSettings().opacity(),\n            sketch: sketch,\n            prefix: `[fill-${fillIndex}]`\n        })\n            .then((gradientFillImage) => {\n            resolve(gradientFillImage);\n        });\n    });\n};\nconst processLayerFillPattern = ({ page, layer, fill, fillIndex, sketch }) => {\n    return new Promise((resolve, reject) => {\n        if (fill.pattern.image) {\n            createPatternFillImage({\n                page: page,\n                layer: layer,\n                pattern: fill.pattern,\n                fillOpacity: fill.sketchObject.contextSettings().opacity(),\n                sketch: sketch,\n                prefix: `[fill-${fillIndex}]`\n            })\n                .then((patternFillImage) => {\n                resolve(patternFillImage);\n            });\n        }\n        else {\n            resolve(null);\n        }\n    });\n};\nconst processLayerFill = ({ page, layer, fill, fillIndex, sketch }) => {\n    return new Promise((resolve, reject) => {\n        switch (fill.fillType) {\n            case 'Pattern':\n                processLayerFillPattern({\n                    page: page,\n                    layer: layer,\n                    fill: fill,\n                    fillIndex: fillIndex,\n                    sketch: sketch\n                })\n                    .then((layerImage) => {\n                    resolve(layerImage);\n                });\n                break;\n            case 'Gradient':\n                processLayerFillGradient({\n                    page: page,\n                    layer: layer,\n                    fill: fill,\n                    fillIndex: fillIndex,\n                    sketch: sketch\n                })\n                    .then((layerImage) => {\n                    resolve(layerImage);\n                });\n                break;\n            case 'Color':\n                resolve(null);\n                break;\n        }\n    });\n};\nexport const processLayerFills = ({ page, layer, sketch, fills }) => {\n    let promises = [];\n    fills.forEach((fill, fillIndex) => {\n        if (fill.enabled) {\n            promises.push(processLayerFill({\n                page: page,\n                layer: layer,\n                fill: fill,\n                fillIndex: fillIndex,\n                sketch: sketch\n            }));\n        }\n    });\n    return Promise.all(promises);\n};\nconst processLayerBorder = ({ page, layer, border, borderIndex, sketch }) => {\n    return new Promise((resolve, reject) => {\n        switch (border.fillType) {\n            case 'Gradient':\n                processLayerBorderGradient({\n                    page: page,\n                    layer: layer,\n                    border: border,\n                    borderIndex: borderIndex,\n                    sketch: sketch\n                })\n                    .then((layerImage) => {\n                    resolve(layerImage);\n                });\n                break;\n            case 'Pattern':\n            case 'Color':\n                resolve(null);\n                break;\n        }\n    });\n};\nexport const processLayerBorders = ({ page, layer, sketch, borders }) => {\n    let promises = [];\n    borders.forEach((border, borderIndex) => {\n        if (border.enabled) {\n            promises.push(processLayerBorder({\n                page: page,\n                layer: layer,\n                border: border,\n                borderIndex: borderIndex,\n                sketch: sketch\n            }));\n        }\n    });\n    return Promise.all(promises);\n};\nconst processLayer = ({ page, layer, sketch }) => {\n    return new Promise((resolve, reject) => {\n        const layerImages = [];\n        switch (layer.type) {\n            case 'Image':\n                processImageLayerAssets({\n                    page: page,\n                    layer: layer,\n                    sketch: sketch\n                })\n                    .then((imageLayerImages) => {\n                    layerImages.push(...imageLayerImages);\n                })\n                    .finally(() => {\n                    resolve(layerImages);\n                });\n                break;\n            case 'Shape':\n            case 'ShapePath':\n                processShapeLayerAssets({\n                    page: page,\n                    layer: layer,\n                    sketch: sketch\n                })\n                    .then((shapeLayerImages) => {\n                    layerImages.push(...shapeLayerImages);\n                })\n                    .finally(() => {\n                    resolve(layerImages);\n                });\n                break;\n            case 'Group':\n                processGroupLayerAssets({\n                    page: page,\n                    layer: layer,\n                    sketch: sketch\n                })\n                    .then((groupLayerImages) => {\n                    layerImages.push(...groupLayerImages);\n                })\n                    .finally(() => {\n                    resolve(layerImages);\n                });\n                break;\n            default:\n                resolve(layerImages);\n        }\n    });\n};\nexport const processLayers = ({ page, layers, sketch }) => {\n    const promises = [];\n    layers.forEach((layer) => {\n        promises.push(processLayer({\n            page: page,\n            layer: layer,\n            sketch: sketch\n        }));\n    });\n    return Promise.all(promises);\n};\nexport const getAssets = ({ page, artboard, sketch }) => {\n    return new Promise((resolve, reject) => {\n        processLayers({\n            page: page,\n            layers: artboard.layers,\n            sketch: sketch\n        })\n            .then((layerImages) => {\n            const images = layerImages.reduce((imageArray, layerImageArray) => {\n                return [...imageArray, ...layerImageArray];\n            }, []);\n            resolve(images);\n        });\n    });\n};\nexport default getAssets;\n","import { processLayers } from './assets';\nconst processGroupLayerAssets = ({ page, layer, sketch }) => {\n    return new Promise((resolve, reject) => {\n        const layerImages = [];\n        processLayers({\n            page: page,\n            layers: layer.layers,\n            sketch: sketch\n        })\n            .then((groupLayerImages) => {\n            const images = groupLayerImages.reduce((imageArray, layerImageArray) => {\n                return [...imageArray, ...layerImageArray];\n            }, []);\n            layerImages.push(...images);\n        })\n            .finally(() => {\n            resolve(layerImages);\n        });\n    });\n};\nexport default processGroupLayerAssets;\n","import { generateImageAsset, processLayerFills, processLayerBorders } from './assets';\nconst processLayerImage = ({ page, layer, sketch }) => {\n    return new Promise((resolve, reject) => {\n        // create image layer from image date\n        const baseImage = new sketch.Image({\n            image: layer.image,\n            frame: layer.frame,\n            parent: page\n        });\n        generateImageAsset({\n            layer: baseImage,\n            sketch: sketch,\n            id: layer.id,\n            prefix: '[image]'\n        })\n            .then((imageAsset) => {\n            // remove asset artboard from page\n            baseImage.remove();\n            // return base64 image\n            resolve(imageAsset);\n        });\n    });\n};\nconst processImageLayerAssets = ({ page, layer, sketch }) => {\n    return new Promise((resolve, reject) => {\n        const { style } = layer;\n        const { fills, borders, shadows, innerShadows } = style;\n        const layerImages = [];\n        processLayerImage({\n            page: page,\n            layer: layer,\n            sketch: sketch\n        })\n            .then((layerImage) => {\n            layerImages.push(layerImage);\n            return processLayerFills({\n                page: page,\n                layer: layer,\n                sketch: sketch,\n                fills: fills\n            });\n        })\n            .then((fillImages) => {\n            const newImages = fillImages.filter(fillImage => fillImage);\n            layerImages.push(...newImages);\n            return processLayerBorders({\n                page: page,\n                layer: layer,\n                sketch: sketch,\n                borders: borders\n            });\n        })\n            .then((borderImages) => {\n            const newImages = borderImages.filter(borderImage => borderImage);\n            layerImages.push(...newImages);\n        })\n            .finally(() => {\n            resolve(layerImages);\n        });\n    });\n};\nexport default processImageLayerAssets;\n","import getArtboard from './artboard';\nimport getAssets from './assets';\nconst getStore = ({ page, artboard, sketch }) => {\n    return new Promise((resolve, reject) => {\n        // create new page for clean asset generation\n        const srmPage = new sketch.Page({\n            name: `srm.page`,\n            parent: page.parent\n        });\n        // duplicate selected artboard and set on new page\n        const srmArtboard = artboard.duplicate();\n        srmArtboard.parent = srmPage;\n        srmArtboard.frame.x = 0;\n        srmArtboard.frame.y = 0;\n        srmArtboard.background.includedInExport = true;\n        console.log('Processing Artboard');\n        getArtboard({\n            artboard: srmArtboard,\n            sketch: sketch,\n            page: page\n        })\n            .then(() => {\n            console.log('Processing Assets');\n            return getAssets({\n                page: srmPage,\n                artboard: srmArtboard,\n                sketch: sketch\n            });\n        })\n            .then(images => {\n            console.log('Assets Created');\n            // remove page\n            srmPage.remove();\n            // select original page\n            page.selected = true;\n            // return final store\n            resolve({\n                artboard: srmArtboard,\n                images: images\n            });\n        });\n    });\n};\nexport default getStore;\n","import { processLayerFills, processLayerBorders } from './assets';\nconst processShapeLayerAssets = ({ page, layer, sketch }) => {\n    return new Promise((resolve, reject) => {\n        const { style } = layer;\n        const { fills, borders, shadows, innerShadows } = style;\n        const layerImages = [];\n        processLayerFills({\n            page: page,\n            layer: layer,\n            sketch: sketch,\n            fills: fills\n        })\n            .then((fillImages) => {\n            const newImages = fillImages.filter(fillImage => fillImage);\n            layerImages.push(...newImages);\n            return processLayerBorders({\n                page: page,\n                layer: layer,\n                sketch: sketch,\n                borders: borders\n            });\n        })\n            .then((borderImages) => {\n            const newImages = borderImages.filter(borderImage => borderImage);\n            layerImages.push(...newImages);\n        })\n            .finally(() => {\n            resolve(layerImages);\n        });\n    });\n};\nexport default processShapeLayerAssets;\n","module.exports = \"file://\" + String(context.scriptPath).split(\".sketchplugin/Contents/Sketch\")[0] + \".sketchplugin/Contents/Resources/_webpack_resources/b63b979daaf1d51d0133cf98ccbeb494.html\";","module.exports = \"file://\" + String(context.scriptPath).split(\".sketchplugin/Contents/Sketch\")[0] + \".sketchplugin/Contents/Resources/_webpack_resources/d5b9bcc5e675d7f66a210f8e6e71e346.html\";","// @ts-ignore\nimport sketch from 'sketch/dom';\n// @ts-ignore\nimport ui from 'sketch/ui';\n// @ts-ignore\nimport BrowserWindow from 'sketch-module-web-view';\n// @ts-ignore\nimport { getWebview } from 'sketch-module-web-view/remote';\nimport getStore from '../resources/store';\nconst appWindowIdentifier = 'srm.appWindow';\nconst loadingWindowIdentifier = 'srm.loadingWindow';\nexport default (context) => {\n    // close any existing windows\n    const existingAppWindow = getWebview(appWindowIdentifier);\n    const existingLoadingWindow = getWebview(loadingWindowIdentifier);\n    if (existingAppWindow) {\n        existingAppWindow.close();\n    }\n    else if (existingLoadingWindow) {\n        existingLoadingWindow.close();\n    }\n    // get sketch document\n    const document = sketch.getSelectedDocument();\n    // get sketch selected page\n    const page = document.selectedPage;\n    // get sketch selected layers\n    const selectedLayers = document.selectedLayers;\n    // get sketch selected artboard\n    const selectedArtboard = selectedLayers.layers.find((layer) => {\n        return layer.type === 'Artboard' && layer.selected;\n    });\n    // if artboard selected, run command\n    if (selectedArtboard) {\n        // set base store\n        let store = null;\n        // set theme\n        const theme = ui.getTheme();\n        // set loading modal window\n        const loadingWindow = new BrowserWindow({\n            identifier: loadingWindowIdentifier,\n            parent: document,\n            modal: true,\n            show: false\n        });\n        // set app window\n        const appWindow = new BrowserWindow({\n            identifier: appWindowIdentifier,\n            width: 1200,\n            height: 900,\n            fullscreenable: false,\n            show: false\n        });\n        // set loading window contents\n        const loadingWebContents = loadingWindow.webContents;\n        // set app window contents\n        const appWebContents = appWindow.webContents;\n        // load loading.html in loading modal\n        loadingWindow.loadURL(require(`../resources/ui/loading.html`));\n        // display loading modal when loaded\n        loadingWebContents.on('did-finish-load', () => {\n            // before showing loading window, set window styles based on theme\n            loadingWebContents.executeJavaScript(`setLoadingColor('${theme}')`)\n                // after setting styles, show window and load app\n                .then(() => {\n                loadingWindow.show();\n                appWindow.loadURL(require('../resources/ui/index.html'));\n            });\n        });\n        // wait till app index finished loading\n        appWebContents.on('did-finish-load', () => {\n            // get store when index loads\n            getStore({\n                page: page,\n                artboard: selectedArtboard,\n                sketch: sketch\n            })\n                // set plugin store && update loading text\n                .then((appStore) => {\n                store = appStore;\n                return loadingWebContents.executeJavaScript(`setLoadingText('Rendering', 'Drawing canvas')`);\n            })\n                // maximize app window size && render app\n                .then(() => {\n                appWindow.maximize();\n                appWindow.center();\n                return appWebContents.executeJavaScript(`renderApp(\n            ${JSON.stringify(store.artboard)},\n            ${JSON.stringify(store.images)},\n            ${JSON.stringify(theme)}\n          )`);\n            })\n                // close loading window && open app window\n                .finally(() => {\n                loadingWindow.close();\n                appWindow.show();\n            });\n        });\n        // if app failed to load,\n        // close windows and display alert\n        appWebContents.on('did-fail-load', () => {\n            loadingWindow.close();\n            appWindow.close();\n            ui.alert('Error', 'Spec failed to load.');\n        });\n    }\n    else {\n        // if artboard not selected, alert user\n        ui.alert('Invalid Selection', 'Select an artboard to render.');\n    }\n};\nexport const onShutdown = () => {\n    const existingAppWindow = getWebview(appWindowIdentifier);\n    const existingLoadingWindow = getWebview(loadingWindowIdentifier);\n    if (existingAppWindow) {\n        existingAppWindow.close();\n    }\n    else if (existingLoadingWindow) {\n        existingLoadingWindow.close();\n    }\n};\n","module.exports = require(\"events\");","module.exports = require(\"sketch/dom\");","module.exports = require(\"sketch/ui\");"],"sourceRoot":""}